<!DOCTYPE html>

<html>
<head>
  <title>Simple LMI Calculator based on http://at.hon.gy/Z1pLvI. Is there a better way</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          
          <h1>Simple LMI Calculator based on <a href="http://at.hon.gy/Z1pLvI">http://at.hon.gy/Z1pLvI</a>. Is there a better way</h1>
<h1>to implement this lookup?</h1>

          
            <div class="highlight"><pre>LMI =
	lookup: (lvr, loan) -&gt;
		b1 = [<span class="number">0.41</span>, <span class="number">0.61</span>, <span class="number">0.76</span>, <span class="number">0.91</span>, <span class="number">1.22</span>, <span class="number">1.68</span>, <span class="number">1.89</span>, <span class="number">2.10</span>]
		b2 = [<span class="number">0.52</span>, <span class="number">0.78</span>, <span class="number">0.99</span>, <span class="number">1.18</span>, <span class="number">1.60</span>, <span class="number">2.20</span>, <span class="number">2.47</span>, <span class="number">2.74</span>]
		b3 = [<span class="number">0.72</span>, <span class="number">1.01</span>, <span class="number">1.25</span>, <span class="number">1.50</span>, <span class="number">2.02</span>, <span class="number">3.31</span>, <span class="number">3.56</span>, <span class="number">3.76</span>]

		<span class="keyword">if</span> loan &lt;= <span class="number">300000</span>
			band = b1
		<span class="keyword">else</span> <span class="keyword">if</span> loan &lt;= <span class="number">600000</span>
			band = b2
		<span class="keyword">else</span> <span class="keyword">if</span> loan &lt;= <span class="number">1000000</span>
			band = b3

		<span class="keyword">if</span> lvr &gt; <span class="number">0.8</span> <span class="keyword">and</span> lvr &lt; <span class="number">0.82</span>
			index = <span class="number">0</span>
		<span class="keyword">else</span> <span class="keyword">if</span> lvr &lt; <span class="number">0.84</span>
			index = <span class="number">1</span>
		<span class="keyword">else</span> <span class="keyword">if</span> lvr &lt; <span class="number">0.86</span>
			index = <span class="number">2</span>
		<span class="keyword">else</span> <span class="keyword">if</span> lvr &lt; <span class="number">0.88</span>
			index = <span class="number">3</span>
		<span class="keyword">else</span> <span class="keyword">if</span> lvr &lt; <span class="number">0.9</span>
			index = <span class="number">4</span>
		<span class="keyword">else</span> <span class="keyword">if</span> lvr &lt; <span class="number">0.92</span>
			index = <span class="number">5</span>
		<span class="keyword">else</span> <span class="keyword">if</span> lvr &lt; <span class="number">0.94</span>
			index = <span class="number">6</span>
		<span class="keyword">else</span>
			index = <span class="number">7</span>

		band[index] / <span class="number">100</span></pre></div>
          
        

        
      </div>

      
        
        <h1>Repayment periods</h1>

        
          <div class="highlight"><pre>Period =
	Monthly     : <span class="number">12</span>
	Fortnightly : <span class="number">24</span>
	Weekly      : <span class="number">48</span></pre></div>
        
      
        
        <h1>Mortgage</h1>

        
          <div class="highlight"><pre><span class="class"><span class="keyword">class</span> <span class="title">Mortgage</span> <span class="keyword">extends</span> <span class="title">Backbone</span>.<span class="title">Model</span></span></pre></div>
        
      
        
        <h1>Every mortgage has these variables which can be adjusted.</h1>

        
          <div class="highlight"><pre>defaults:
		interest: <span class="number">5.74</span> / <span class="number">100</span>
		price:    <span class="number">700000</span>
		deposit:  <span class="number">150459</span>
		duration: <span class="number">30</span> * <span class="number">12</span></pre></div>
        
      
        
        <h1>TODO: The big fat stamp duty!</h1>

        
          <div class="highlight"><pre>stamp_duty: -&gt;
		<span class="number">26990</span></pre></div>
        
      
        
        <h1>Loan is calculated based on the price of the property and the initial deposit</h1>
<h1>put down on the property.</h1>

        
          <div class="highlight"><pre>loan: -&gt;
		<span class="keyword">this</span>.price - <span class="keyword">this</span>.deposit</pre></div>
        
      
        
        <h1>This is the total monies borrowed from the lender.</h1>

        
          <div class="highlight"><pre>borrowing: -&gt;
		<span class="keyword">this</span>.loan() + <span class="keyword">this</span>.lmi() + <span class="keyword">this</span>.fees() + <span class="keyword">this</span>.stamp_duty()</pre></div>
        
      
        
        <h1>TODO: Lender&#39;s settlement fee, legal fees, Registration fees, Other lender fees.</h1>

        
          <div class="highlight"><pre>fees: -&gt;
		<span class="number">2469</span></pre></div>
        
      
        
        <h1>Loan to Value Ratio (LVR) is calculated based on the loan and the price of the</h1>
<h1>property.</h1>
<p>#</p>
<h1>Note: This value is almost always presented as percentage value.</h1>

        
          <div class="highlight"><pre>lvr: -&gt;
		<span class="keyword">this</span>.loan() / <span class="keyword">this</span>.price</pre></div>
        
      
        
        <h1>Depending on the LVR, a mortgage may need pay Lenders&#39; Mortgage Insurace. This</h1>
<h1>value can vary depending on the LVR and the lender</h1>

        
          <div class="highlight"><pre>lmi: -&gt;
		LMI.lookup(<span class="keyword">this</span>.lvr(), <span class="keyword">this</span>.loan()) * <span class="keyword">this</span>.loan()</pre></div>
        
      
        
        <h1>Monthly repayments for the mortgage based on above variables:</h1>
<h1>M = P (i(1 + i)^n) / ((1 + i)^n - 1)</h1>

        
          <div class="highlight"><pre>repayments: () -&gt;
		P = <span class="keyword">this</span>.borrowing()
		i = <span class="keyword">this</span>.interest / Period.Monthly
		n = <span class="keyword">this</span>.duration
		P * (i * Math.pow((i + <span class="number">1</span>), n)) / (Math.pow((<span class="number">1</span> + i), n) - <span class="number">1</span>)

	toJSON: -&gt;
		_.extend _.clone(<span class="keyword">this</span>.attributes), {
			fees       : <span class="keyword">this</span>.fees()
			loan       : <span class="keyword">this</span>.loan()
			borrowing  : <span class="keyword">this</span>.borrowing()
			lvr        : <span class="keyword">this</span>.lvr() * <span class="number">100</span>
			repayments : <span class="keyword">this</span>.repayments()
			lmi        : <span class="keyword">this</span>.lmi()
		}

	toString: -&gt;
		JSON.stringify <span class="keyword">this</span>.toJSON()</pre></div>
        
      
        
        <h1>Test</h1>

        
          <div class="highlight"><pre>m = <span class="keyword">new</span> Mortgage
console.log m.toString()</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
